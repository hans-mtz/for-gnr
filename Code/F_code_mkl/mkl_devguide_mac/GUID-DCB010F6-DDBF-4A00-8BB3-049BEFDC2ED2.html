<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0016)http://localhost -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="Specifying Code Branches"/>
<meta name="DC.Relation" scheme="URI" content="GUID-497CAEBE-9D78-4C3E-90FE-78437D73C038.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-507796B7-306A-4A67-8BF6-87174B89CBC0.html#GUID-507796B7-306A-4A67-8BF6-87174B89CBC0"/>
<meta name="DC.Relation" scheme="URI" content="http://www.intel.com/software/products/softwaredocs_feedback"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-DCB010F6-DDBF-4A00-8BB3-049BEFDC2ED2"/>
<meta name="DC.Language" content="en-US"/>
<link rel="stylesheet" type="text/css" href="intel_css_styles.css"/>
<title>Specifying Code Branches</title>

</head>
<body id="GUID-DCB010F6-DDBF-4A00-8BB3-049BEFDC2ED2">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em> Math Kernel Library Developer Guide</em></p>


<h1 class="topictitle1">Specifying Code Branches</h1>
<div><p>Intel&reg; oneAPI Math Kernel Library provides a conditional numerical reproducibility (CNR) functionality that enables you to obtain reproducible results from MKL routines. When enabling CNR, you choose a specific code branch of Intel&reg; oneAPI Math Kernel Library that corresponds to the instruction set architecture (ISA) that you target. You can specify the code branch and other CNR options using the<span class="keyword">MKL_CBWR</span> environment variable. 
    </p>
<p><ul id="UL_E3FA77DAB38544138F6F119A567F7860"><li id="LI_05583C69CEF347BA992AB0DEF7788632"><p><samp class="codeph">MKL_CBWR="<var>&lt;branch&gt;[,STRICT]</var>"</samp> or 
        </p>
</li>
<li id="LI_F74D98BF7CB847FE80B7E9EC5C6A8199"><p><samp class="codeph">MKL_CBWR="BRANCH=<var>&lt;branch&gt;[,STRICT]</var>"</samp></p>
</li>
</ul>
</p>
<p>Use the 
      <span class="keyword">STRICT</span> flag to enable strict CNR mode. For more information, see 
      <a href="GUID-8196F5C0-26B6-476F-81C0-6C01A533EB26.html">Reproducibility Conditions</a>. 
    </p>
<p>The 
      <samp class="codeph"><var>&lt;branch&gt;</var></samp> placeholder specifies the CNR branch with one of the following values: 
    </p>

<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-4F7BDA68-57AC-4073-A50B-BBD6B4E868D6" frame="hsides" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" width="NaN%" id="d29657e69"><p>Value 
              </p>
</th>
<th class="row-nocellborder" valign="top" width="66.66666666666666%" id="d29657e72"><p>Description 
              </p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword">AUTO</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p>CNR mode uses the standard ISA-based dispatching model while ensuring fixed cache sizes, deterministic reductions, and static scheduling 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword">COMPATIBLE</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p>Intel&reg; Streaming SIMD Extensions 2 (Intel&reg; SSE2) without rcpps/rsqrtps instructions 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword">SSE4_2</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p> Intel&reg; Streaming SIMD Extensions 4.2 (Intel&reg; SSE4.2) 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword"> AVX</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p> Intel&reg; Advanced Vector Extensions (Intel&reg; AVX) 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword"> AVX2</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p> Intel&reg; Advanced Vector Extensions 2 (Intel&reg; AVX2) 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword"> AVX512</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p>Intel AVX-512 on Intel&reg; Xeon&reg; processors 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword"> AVX512_E1</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p> Intel&reg; Advanced Vector Extensions 512 (Intel&reg; AVX-512) with support for Vector Neural Network Instructions 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword">AVX512_MIC</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p> Intel&reg; Advanced Vector Extensions 512 (Intel&reg; AVX-512) on Intel&reg; Xeon Phi&#8482; processors 
              </p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="NaN%" headers="d29657e69 "><p><span class="keyword">AVX512_MIC_E1</span></p>
</td>
<td class="row-nocellborder" valign="top" width="66.66666666666666%" headers="d29657e72 "><p> Intel&reg; Advanced Vector Extensions 512 (Intel&reg; AVX-512) with support for Vector Neural Network Instructions on Intel&reg; Xeon Phi&#8482; processors 
              </p>
</td>
</tr>
</tbody>
</table>
</div>
<p>When specifying the CNR branch, be aware of the following: 
    </p>
<ul id="GUID-D3E4CFBD-4B91-466E-8A2F-24F64C01E32F"><li id="LI_AADBD079A46F4B6393FCC928D1F9E13F"><p>Reproducible results are provided under 
          <a href="GUID-8196F5C0-26B6-476F-81C0-6C01A533EB26.html">Reproducibility Conditions</a>. 
        </p>
</li>
<li id="LI_A20F5CA44CB840F6B58D800AD95B310E"><p>Settings other than 
          <span class="keyword">AUTO</span> or 
          <span class="keyword">COMPATIBLE</span> are available only for Intel processors.</p>
</li>
<li id="LI_8450DFDA10514CA9B4D17CC94FD384F1"><p>To get the CNR branch optimized for the processor where your program is currently running, choose the value of 
          <span class="keyword">AUTO</span> or call the 
  <span class="option">mkl_cbwr_get_auto_branch</span> function. 
  </p>
</li>
<li><p>Strict CNR mode is only supported for AVX2, AVX512, AVX512_E1, AVX512_MIC, and AVX512_MIC_E1 branches. You can also use strict CNR mode with the AUTO branch when running on Intel processors that support one of these instruction set architectures (ISAs). 
    </p>
</li>
</ul>
<p>Setting the 
    <span class="keyword">MKL_CBWR</span> environment variable or a call to an equivalent 
  <span class="option">mkl_cbwr_set</span> function fixes the code branch and sets the reproducibility mode. 
  </p>
<div class="Note"><h3 class="NoteTipHead">Note</h3> <ul id="GUID-47D9583B-5F52-4841-82C3-AEFDE8246CFB"><li id="LI_F23DE808579743C69B6CD1FDD19679A1"><p> If the value of the branch is incorrect or your processor or operating system does not support the specified ISA, CNR ignores this value and uses the 
          <span class="keyword">AUTO</span> branch without providing any warning messages. 
        </p>
</li>
<li id="LI_C013D24182E949C6AC46E738D0E5EBD5"><p>Calls to functions that define the behavior of CNR must precede any of the math library functions that they control. 
        </p>
</li>
<li id="LI_4A6F6F5CFB5A4A8CA55A59B55FDE5056"><p id="GUID-09B92FE6-3E75-4259-A670-F0486374CD32">Settings specified by the functions take precedence over the settings specified by the environment variable. 
        </p>
</li>
</ul>
</div>
<p>See the 
    <em>Intel&reg; oneAPI Math Kernel Library Developer Reference</em> for how to specify the branches using functions. 
  </p>
<p id="P_CF_12869800235462">
<div class="tablenoborder"><table cellpadding="4" summary="" id="d25e46" frame="border" border="1" cellspacing="0" rules="all"><thead align="left"><tr><th class="cellrowborder" align="left" valign="top" width="100%" id="d29657e215"><p id="d25e52">Optimization Notice 
              </p>
</th>
</tr>
</thead>
<tbody><tr><td class="bgcolor(#f5f5f5)" bgcolor="#f5f5f5" valign="top" width="100%" headers="d29657e215 "><p>Intel's compilers may or may not optimize to the same degree for non-Intel microprocessors for optimizations that are not unique to Intel microprocessors. These optimizations include SSE2, SSE3, and SSSE3 instruction sets and other optimizations. Intel does not guarantee the availability, functionality, or effectiveness of any optimization on microprocessors not manufactured by Intel. Microprocessor-dependent optimizations in this product are intended for use with Intel microprocessors. Certain optimizations not specific to Intel microarchitecture are reserved for Intel microprocessors. Please refer to the applicable product User and Reference Guides for more information regarding the specific instruction sets covered by this notice. 
              </p>
<p> Notice revision #20110804 
              </p>
</td>
</tr>
</tbody>
</table>
</div>
 This notice covers the following instruction sets: SSE2, SSE4.2, AVX2, AVX-512. 
    </p>
</div>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-497CAEBE-9D78-4C3E-90FE-78437D73C038.html">Obtaining Numerically Reproducible Results</a></div>
</div>
<div class="See Also"><h2>See Also</h2>
<div class="linklist">
<div><a href="GUID-507796B7-306A-4A67-8BF6-87174B89CBC0.html#GUID-507796B7-306A-4A67-8BF6-87174B89CBC0">Getting Started with Conditional Numerical Reproducibility</a></div></div></div>
</body>
</html>
