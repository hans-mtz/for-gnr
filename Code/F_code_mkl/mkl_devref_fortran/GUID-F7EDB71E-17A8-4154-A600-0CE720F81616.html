<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0016)http://localhost -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="DC.Type" content="FunctionRef"/>
<meta name="DC.Title" content="mkl_free_buffers"/>
<meta name="abstract" content="Frees unused memory allocated by the Intel&reg; oneAPI Math Kernel Library Memory Allocator."/>
<meta name="description" content="Frees unused memory allocated by the Intel&reg; oneAPI Math Kernel Library Memory Allocator."/>
<meta name="DC.subject" content="support routines, mkl_free_buffers, MKL_Free_Buffers"/>
<meta name="keywords" content="support routines, mkl_free_buffers, MKL_Free_Buffers"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C44DA051-9CF1-416C-B935-C844C0707BA1.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-F7EDB71E-17A8-4154-A600-0CE720F81616"/>
<meta name="DC.Language" content="en-US"/>
<link rel="stylesheet" type="text/css" href="intel_css_styles.css"/>
<title>mkl_free_buffers</title>

</head>
<body id="GUID-F7EDB71E-17A8-4154-A600-0CE720F81616">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em>Intel&reg; oneAPI Math Kernel Library Developer Reference - Fortran</em></p>


<h1 class="topictitle1"><span class="option">mkl_free_buffers</span></h1>
<!--Frees unused memory allocated by the Intel&reg; oneAPI Math Kernel Library Memory Allocator.--><div><p class="shortdesc">Frees unused memory allocated by the Intel&reg; oneAPI Math Kernel Library Memory Allocator.</p>
<div class="section" id="GUID-02C70092-0030-4115-BC75-CA615FC261F2"><h2 class="sectiontitle">Syntax</h2><dl class="dlsyntax"><p class="dlsyntaxpara"><span class="kwd">call 
mkl_free_buffers</span></p></dl></div>
<div class="section" id="GUID-B128DD10-3ECE-4FDC-A6DC-CB04CD1D1166"><h2 class="sectiontitle">Fortran Include Files/Modules </h2><ul id="d163e286"><li>Include file: <span class="filepath">mkl.fi</span></li>
<li>Module (compiled): <span class="filepath">mkl_service.mod</span></li>
<li>Module (source): <span class="filepath">mkl_service.f90</span></li>
</ul>
</div>
<div class="section" id="GUID-766A2FC8-E01C-4CAA-AB3D-66EDB5B387C6"><h2 class="sectiontitle">Description</h2><p>To improve performance of Intel&reg; oneAPI Math Kernel Library, the Memory Allocator uses per-thread memory pools where buffers may be collected for fast reuse. The<span class="option">mkl_free_buffers</span> function  frees unused memory allocated by the Memory Allocator.</p>
<p>See the<em>Intel&reg; oneAPI Math Kernel Library Developer Guide</em> for details.</p>
<p>You should call <span class="option">mkl_free_buffers</span>after the last call to Intel&reg; oneAPI Math Kernel Library functions. In large applications, if you suspect that the memory may get insufficient, you may call this function earlier, but anticipate a drop in performance that may occur due to reallocation of buffers for subsequent calls to Intel&reg; oneAPI Math Kernel Library functions.</p>
<p>
<div class="tablenoborder"><table cellpadding="4" summary="" id="d433e46" frame="border" border="1" cellspacing="0" rules="all"><thead align="left"><tr><th class="cellrowborder" align="left" valign="top" width="100%" id="d1828607e93"><p id="d433e52">Optimization Notice 
              </p>
</th>
</tr>
</thead>
<tbody><tr><td class="bgcolor(#f5f5f5)" bgcolor="#f5f5f5" valign="top" width="100%" headers="d1828607e93 "><p>Intel's compilers may or may not optimize to the same degree for non-Intel microprocessors for optimizations that are not unique to Intel microprocessors. These optimizations include SSE2, SSE3, and SSSE3 instruction sets and other optimizations. Intel does not guarantee the availability, functionality, or effectiveness of any optimization on microprocessors not manufactured by Intel. Microprocessor-dependent optimizations in this product are intended for use with Intel microprocessors. Certain optimizations not specific to Intel microarchitecture are reserved for Intel microprocessors. Please refer to the applicable product User and Reference Guides for more information regarding the specific instruction sets covered by this notice. 
              </p>
<p> Notice revision #20110804 
              </p>
</td>
</tr>
</tbody>
</table>
</div>
 This notice covers the following instruction sets: SSE2, SSE4.2, AVX2, AVX-512. 
    </p>
</div>
<div class="section" id="EX15-2"><h2 class="sectiontitle">Usage of  mkl_free_buffers
 with FFT Functions<span> (C Example)</span></h2><pre>DFTI_DESCRIPTOR_HANDLE hand1; 
DFTI_DESCRIPTOR_HANDLE hand2; 
void mkl_free_buffers(void);
. . . . . .
/* Using Intel MKL FFT */
Status = DftiCreateDescriptor(&amp;hand1, DFTI_SINGLE, DFTI_COMPLEX, dim, m1); 
Status = DftiCommitDescriptor(hand1);
Status = DftiComputeForward(hand1, s_array1);
. . . . . .
Status = DftiCreateDescriptor(&amp;hand2, DFTI_SINGLE, DFTI_COMPLEX, dim, m2); 
Status = DftiCommitDescriptor(hand2);
. . . . . .
Status = DftiFreeDescriptor(&amp;hand1);
. . . . . .
Status = DftiComputeBackward(hand2, s_array2)); 
Status = DftiFreeDescriptor(&amp;hand2);
/* Here you finish using Intel MKL FFT */
/* Memory leak will be triggered by any memory control tool */
/* Use mkl_free_buffers() to avoid memory leaking */
mkl_free_buffers();
</pre></div>
</div>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C44DA051-9CF1-416C-B935-C844C0707BA1.html">Memory Management</a></div>
</div>
<div/>
</body>
</html>
